<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>组件生命周期 - Vue.js快速上手</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: #f8f9fa;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        h1 {
            color: #42b983;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .breadcrumb {
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        
        .content {
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            margin: 25px 0 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        
        h3 {
            color: #555;
            margin: 20px 0 12px;
        }
        
        p {
            margin-bottom: 15px;
            line-height: 1.8;
        }
        
        .code-block {
            background: #2d3648;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .code-comment {
            color: #637777;
        }
        
        .code-keyword {
            color: #c792ea;
        }
        
        .code-variable {
            color: #ffcb6b;
        }
        
        .code-string {
            color: #c3e88d;
        }
        
        .code-number {
            color: #f78c6c;
        }
        
        .code-function {
            color: #82aaff;
        }
        
        .code-boolean {
            color: #ff5874;
        }
        
        .lifecycle-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .lifecycle-table th, .lifecycle-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .lifecycle-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        .lifecycle-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .key-features {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }
        
        .key-features h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }
        
        .key-features ul {
            padding-left: 25px;
        }
        
        .key-features li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .comparison-item {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #42b983;
        }
        
        .comparison-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .practice {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }
        
        .practice h3 {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .practice ul {
            padding-left: 25px;
        }
        
        .practice li {
            margin-bottom: 10px;
        }
        
        .vue-example {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        .vue-example-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .lifecycle-diagram {
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .lifecycle-step {
            display: inline-block;
            margin: 10px;
            padding: 10px 15px;
            background-color: #e3f2fd;
            border-radius: 5px;
            border: 1px solid #bbdefb;
        }
        
        nav {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .nav-link {
            display: inline-block;
            padding: 10px 20px;
            background: #42b983;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 0 10px;
        }
        
        .nav-link:hover {
            background: #359c6d;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="breadcrumb">Vue.js快速上手 > 组件系统篇 > 组件生命周期</div>
            <h1>组件生命周期</h1>
        </header>
        
        <div class="content">
            <p>组件生命周期是指组件从创建到销毁的整个过程。Vue.js为这个过程中的不同阶段提供了钩子函数，让我们可以在特定的阶段执行自定义逻辑。</p>
            
            <div class="key-features">
                <h3>组件生命周期核心概念</h3>
                <ul>
                    <li><strong>创建阶段</strong>：组件实例被创建的阶段</li>
                    <li><strong>挂载阶段</strong>：组件被挂载到DOM上的阶段</li>
                    <li><strong>更新阶段</strong>：组件数据更新时的阶段</li>
                    <li><strong>卸载阶段</strong>：组件被销毁的阶段</li>
                    <li><strong>组合式API生命周期</strong>：在setup函数中使用的生命周期钩子</li>
                    <li><strong>错误处理</strong>：在生命周期中处理错误</li>
                </ul>
            </div>
            
            <h2>生命周期图示</h2>
            <div class="lifecycle-diagram">
                <div class="lifecycle-step">setup()</div>
                <div class="lifecycle-step">beforeCreate</div>
                <div class="lifecycle-step">created</div>
                <div class="lifecycle-step">beforeMount</div>
                <div class="lifecycle-step">mounted</div>
                <div class="lifecycle-step">beforeUpdate</div>
                <div class="lifecycle-step">updated</div>
                <div class="lifecycle-step">beforeUnmount</div>
                <div class="lifecycle-step">unmounted</div>
            </div>
            
            <h2>创建阶段</h2>
            <p>创建阶段包括setup()、beforeCreate和created钩子。在这个阶段，组件实例被创建，数据观测和事件配置完成，但DOM尚未挂载。</p>
            
            <table class="lifecycle-table">
                <thead>
                    <tr>
                        <th>生命周期钩子</th>
                        <th>执行时机</th>
                        <th>主要用途</th>
                        <th>注意事项</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>setup()</td>
                        <td>在组件实例创建前执行（组合式API）</td>
                        <td>设置响应式数据、方法和计算属性</td>
                        <td>替代beforeCreate和created</td>
                    </tr>
                    <tr>
                        <td>beforeCreate</td>
                        <td>实例初始化之后，数据观测和事件配置之前</td>
                        <td>很少使用</td>
                        <td>此时data、methods等还未初始化</td>
                    </tr>
                    <tr>
                        <td>created</td>
                        <td>实例创建完成后立即调用</td>
                        <td>处理数据初始化、API调用</td>
                        <td>DOM还未挂载，不能访问$el</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="vue-example">
                <div class="vue-example-title">创建阶段生命周期示例</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;lifecycle-demo&gt;&lt;/lifecycle-demo&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp, ref, onMounted, onUnmounted } = Vue;<br><br>
                    
                    createApp({})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'lifecycle-demo'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;data() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message: <span class="code-string">'Hello Vue Lifecycle!'</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;setup() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'1. setup() - 组合式API入口点'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> count = ref(<span class="code-number">0</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> { count }<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;beforeCreate() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'2. beforeCreate - 实例初始化之后'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;created() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'3. created - 实例创建完成'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   data已初始化:'</span>, <span class="code-keyword">this</span>.message);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   但DOM未挂载'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 适合进行数据获取</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch(<span class="code-string">'/api/data'</span>)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span class="code-function">res</span> =&gt; res.json())<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span class="code-function">data</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   API数据获取成功'</span>, data);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;{{ message }}&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;计数: {{ count }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>挂载阶段</h2>
            <p>挂载阶段包括beforeMount和mounted钩子。在这个阶段，组件被挂载到DOM上，可以访问DOM元素。</p>
            
            <div class="vue-example">
                <div class="vue-example-title">挂载阶段生命周期示例</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;mounting-demo&gt;&lt;/mounting-demo&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp } = Vue;<br><br>
                    
                    createApp({})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'mounting-demo'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;data() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loaded: <span class="code-boolean">false</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;beforeMount() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'4. beforeMount - 挂载前'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   模板编译完成，但未挂载到DOM'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;mounted() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'5. mounted - 组件已挂载到DOM'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   可以访问DOM元素'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.$nextTick(<span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   DOM更新完成'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// DOM操作示例</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> element = <span class="code-keyword">this</span>.$el;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element.style.border = <span class="code-string">'2px solid #42b983'</span>;<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 第三方库初始化</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// new SomeLibrary(element);</span><br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 设置定时器或监听器</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.timer = setInterval(<span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'定时器执行'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, <span class="code-number">5000</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class=<span class="code-string">"mounting-demo"</span>&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;挂载阶段演示&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;组件已挂载到DOM&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>更新阶段</h2>
            <p>更新阶段包括beforeUpdate和updated钩子。当组件数据发生变化时，会触发这个阶段的钩子。</p>
            
            <div class="vue-example">
                <div class="vue-example-title">更新阶段生命周期示例</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;updating-demo&gt;&lt;/updating-demo&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp, ref } = Vue;<br><br>
                    
                    createApp({<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;setup() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> counter = ref(<span class="code-number">0</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> increment = <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counter.value++;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> { counter, increment }<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'updating-demo'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;props: [<span class="code-string">'counter'</span>],<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;beforeUpdate() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'6. beforeUpdate - 数据更新前'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   数据已更新，但DOM尚未更新'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   旧的DOM值:'</span>, <span class="code-keyword">this</span>.$el.textContent);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;updated() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'7. updated - DOM已更新'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   新的DOM值:'</span>, <span class="code-keyword">this</span>.$el.textContent);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;更新阶段演示: {{ counter }}&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"increment"</span>&gt;增加计数&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>卸载阶段</h2>
            <p>卸载阶段包括beforeUnmount和unmounted钩子。当组件被销毁时，会触发这个阶段的钩子。</p>
            
            <div class="vue-example">
                <div class="vue-example-title">卸载阶段生命周期示例</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;button @click=<span class="code-string">"showDemo = !showDemo"</span>&gt;{{ showDemo ? '隐藏' : '显示' }} 组件&lt;/button&gt;<br>
                    &nbsp;&nbsp;&lt;lifecycle-demo v-if=<span class="code-string">"showDemo"</span>&gt;&lt;/lifecycle-demo&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp, ref } = Vue;<br><br>
                    
                    createApp({<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;setup() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> showDemo = ref(<span class="code-boolean">true</span>);<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> { showDemo }<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'lifecycle-demo'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;data() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer: <span class="code-boolean">null</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;mounted() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已挂载'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 设置定时器</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.timer = setInterval(<span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'定时器执行中...'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, <span class="code-number">1000</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;beforeUnmount() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'8. beforeUnmount - 组件即将卸载'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   清理定时器和监听器'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 清理定时器</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (<span class="code-keyword">this</span>.timer) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearInterval(<span class="code-keyword">this</span>.timer);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.timer = <span class="code-boolean">null</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;unmounted() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'9. unmounted - 组件已卸载'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'   组件实例已销毁'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;卸载阶段演示&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;显示/隐藏此组件以观察生命周期&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>组合式API中的生命周期</h2>
            <p>在组合式API中，生命周期钩子需要通过导入的方式使用。</p>
            
            <div class="comparison">
                <div class="comparison-item">
                    <div class="comparison-title">选项式API</div>
                    <div class="code-block">
                        <span class="code-keyword">const</span> MyComponent = {<br>
                        &nbsp;&nbsp;data() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count: <span class="code-number">0</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;},<br>
                        &nbsp;&nbsp;mounted() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已挂载'</span>);<br>
                        &nbsp;&nbsp;},<br>
                        &nbsp;&nbsp;updated() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已更新'</span>);<br>
                        &nbsp;&nbsp;},<br>
                        &nbsp;&nbsp;unmounted() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已卸载'</span>);<br>
                        &nbsp;&nbsp;}<br>
                        };
                    </div>
                </div>
                
                <div class="comparison-item">
                    <div class="comparison-title">组合式API</div>
                    <div class="code-block">
                        <span class="code-keyword">import</span> { ref, onMounted, onUpdated, onUnmounted } <span class="code-keyword">from</span> <span class="code-string">'vue'</span>;<br><br>
                        
                        <span class="code-keyword">const</span> MyComponent = {<br>
                        &nbsp;&nbsp;setup() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> count = ref(<span class="code-number">0</span>);<br><br>
                        
                        &nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="code-function">()</span> =&gt; {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已挂载'</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                        
                        &nbsp;&nbsp;&nbsp;&nbsp;onUpdated(<span class="code-function">()</span> =&gt; {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已更新'</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                        
                        &nbsp;&nbsp;&nbsp;&nbsp;onUnmounted(<span class="code-function">()</span> =&gt; {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已卸载'</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                        
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> { count }<br>
                        &nbsp;&nbsp;}<br>
                        };
                    </div>
                </div>
            </div>
            
            <h2>错误处理</h2>
            <p>Vue提供了errorCaptured钩子来捕获子组件的错误。</p>
            
            <div class="vue-example">
                <div class="vue-example-title">错误处理示例</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;error-demo&gt;&lt;/error-demo&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp } = Vue;<br><br>
                    
                    createApp({})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'error-demo'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;errorCaptured(err, instance, info) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(<span class="code-string">'捕获到错误:'</span>, err);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(<span class="code-string">'错误信息:'</span>, info);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-boolean">true</span>; <span class="code-comment">// 阻止错误继续向上传播</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;错误处理演示&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;error-child&gt;&lt;/error-child&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'error-child'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;mounted() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-function">Error(</span><span class="code-string">'子组件错误示例'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;子组件&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>实际应用场景</h2>
            <p>生命周期钩子在实际开发中有很多应用场景：</p>
            
            <div class="key-features">
                <h3>常见应用场景</h3>
                <ul>
                    <li><strong>created</strong>：API数据获取、定时器设置</li>
                    <li><strong>mounted</strong>：DOM操作、第三方库初始化、事件监听器设置</li>
                    <li><strong>updated</strong>：响应数据变化的DOM操作</li>
                    <li><strong>beforeUnmount</strong>：清理工作（定时器、事件监听器等）</li>
                    <li><strong>errorCaptured</strong>：错误处理和上报</li>
                </ul>
            </div>
            
            <div class="vue-example">
                <div class="vue-example-title">实际应用示例 - 数据获取与清理</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;data-fetcher url=<span class="code-string">"'/api/users'"</span>&gt;&lt;/data-fetcher&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp, ref } = Vue;<br><br>
                    
                    createApp({})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'data-fetcher'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;props: [<span class="code-string">'url'</span>],<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;data() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: <span class="code-boolean">null</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading: <span class="code-boolean">true</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error: <span class="code-boolean">null</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retryCount: <span class="code-number">0</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;async created() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">try</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">await</span> <span class="code-keyword">this</span>.fetchData();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">catch</span> (err) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.error = err.message;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;mounted() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 初始化第三方库</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.initChart();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;beforeUnmount() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 清理工作</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (<span class="code-keyword">this</span>.timer) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearInterval(<span class="code-keyword">this</span>.timer);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 销毁第三方库实例</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (<span class="code-keyword">this</span>.chartInstance) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.chartInstance.destroy();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;methods: {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async fetchData() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.loading = <span class="code-boolean">true</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">try</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> response = <span class="code-keyword">await</span> fetch(<span class="code-keyword">this</span>.url);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!response.ok) <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-function">Error(response.statusText);</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.data = <span class="code-keyword">await</span> response.json();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">catch</span> (err) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.error = err.message;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">throw</span> err;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">finally</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.loading = <span class="code-boolean">false</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initChart() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 模拟初始化图表</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'图表初始化'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retry() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.retryCount++;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.fetchData();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class=<span class="code-string">"data-fetcher"</span>&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;数据获取组件&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div v-if=<span class="code-string">"loading"</span>&gt;加载中...&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div v-else-if=<span class="code-string">"error"</span>&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;错误: {{ error }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"retry"</span>&gt;重试 ({{ retryCount }})&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div v-else&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;{{ JSON.stringify(data, null, 2) }}&lt;/pre&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h3>最佳实践建议</h3>
            <p>在使用生命周期钩子时，有一些最佳实践建议：</p>
            
            <ul>
                <li>在created钩子中进行数据初始化和API调用</li>
                <li>在mounted钩子中进行DOM操作和第三方库初始化</li>
                <li>在beforeUnmount钩子中清理定时器、取消订阅等</li>
                <li>避免在updated钩子中修改数据，可能造成无限循环</li>
                <li>合理使用nextTick来等待DOM更新完成</li>
                <li>在组合式API中，使用相应的onXXX函数</li>
            </ul>
            
            <div class="practice">
                <h3>实践练习</h3>
                <ul>
                    <li>创建一个时钟组件，使用mounted钩子设置定时器，beforeUnmount钩子清理定时器</li>
                    <li>创建一个数据表格组件，在created钩子中获取数据，在mounted钩子中初始化排序功能</li>
                    <li>创建一个图表组件，在mounted钩子中初始化图表，在updated钩子中更新图表数据</li>
                    <li>创建一个表单组件，在beforeUpdate钩子中验证数据变化</li>
                    <li>创建一个地图组件，在mounted钩子中初始化地图，在beforeUnmount钩子中销毁地图实例</li>
                </ul>
            </div>
        </div>
        
        <nav>
            <a href="slots.html" class="nav-link">← 上一课：插槽(Slots)</a>
            <a href="dynamic-static-components.html" class="nav-link">下一课：动态与静态组件 →</a>
        </nav>
        
        <footer>
            <p>Vue.js快速上手 - 从零到大神，成为前端大拿，胜任大厂专家职位</p>
        </footer>
    </div>
</body>
</html>