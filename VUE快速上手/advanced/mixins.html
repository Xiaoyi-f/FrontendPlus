<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>混入(Mixins) - Vue.js快速上手</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: #f8f9fa;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        h1 {
            color: #42b983;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .breadcrumb {
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        
        .content {
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            margin: 25px 0 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        
        h3 {
            color: #555;
            margin: 20px 0 12px;
        }
        
        p {
            margin-bottom: 15px;
            line-height: 1.8;
        }
        
        .code-block {
            background: #2d3648;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .code-comment {
            color: #637777;
        }
        
        .code-keyword {
            color: #c792ea;
        }
        
        .code-variable {
            color: #ffcb6b;
        }
        
        .code-string {
            color: #c3e88d;
        }
        
        .code-number {
            color: #f78c6c;
        }
        
        .code-function {
            color: #82aaff;
        }
        
        .code-boolean {
            color: #ff5874;
        }
        
        .mixin-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        
        .mixin-step {
            display: inline-block;
            margin: 10px;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 5px;
            border: 1px solid #bbdefb;
        }
        
        .api-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .api-table th, .api-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .api-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        .api-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .key-features {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }
        
        .key-features h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }
        
        .key-features ul {
            padding-left: 25px;
        }
        
        .key-features li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .comparison-item {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #42b983;
        }
        
        .comparison-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .practice {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }
        
        .practice h3 {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .practice ul {
            padding-left: 25px;
        }
        
        .practice li {
            margin-bottom: 10px;
        }
        
        .vue-example {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        .vue-example-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        nav {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .nav-link {
            display: inline-block;
            padding: 10px 20px;
            background: #42b983;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 0 10px;
        }
        
        .nav-link:hover {
            background: #359c6d;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="breadcrumb">Vue.js快速上手 > 进阶特性篇 > 混入(Mixins)</div>
            <h1>混入(Mixins)</h1>
        </header>
        
        <div class="content">
            <p>混入(Mixins)是Vue.js提供的一种灵活的组件功能复用方式。混入对象可以包含任意组件选项，当组件使用混入对象时，混入对象的所有选项将被"混合"到组件自身的选项中。</p>
            
            <div class="key-features">
                <h3>混入核心概念</h3>
                <ul>
                    <li><strong>选项合并</strong>：混入对象的选项与组件选项合并</li>
                    <li><strong>生命周期钩子</strong>：混入和组件的钩子函数都会被调用</li>
                    <li><strong>数据合并</strong>：混入的数据和组件数据合并到同一对象</li>
                    <li><strong>方法复用</strong>：复用通用方法和逻辑</li>
                    <li><strong>全局混入</strong>：影响所有组件的混入</li>
                    <li><strong>局部混入</li>
                </ul>
            </div>
            
            <h2>Mixin工作原理</h2>
            <div class="mixin-diagram">
                <div class="mixin-step">定义混入对象</div>
                →
                <div class="mixin-step">组件使用混入</div>
                →
                <div class="mixin-step">选项合并</div>
                →
                <div class="mixin-step">创建组件实例</div>
            </div>
            
            <p>混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被混合到组件自身的选项中。在遇到冲突时，组件的选项会覆盖混入的选项。</p>
            
            <h2>选项合并规则</h2>
            <table class="api-table">
                <thead>
                    <tr>
                        <th>选项类型</th>
                        <th>合并规则</th>
                        <th>示例</th>
                        <th>注意事项</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>data</td>
                        <td>递归合并，组件data优先</td>
                        <td>混入和组件的数据属性合并</td>
                        <td>同名数据属性，组件覆盖混入</td>
                    </tr>
                    <tr>
                        <td>methods</td>
                        <td>组件方法覆盖混入方法</td>
                        <td>混入和组件的方法都可用</td>
                        <td>同名方法，组件覆盖混入</td>
                    </tr>
                    <tr>
                        <td>生命周期钩子</td>
                        <td>都会被调用，混入先于组件</td>
                        <td>混入和组件的钩子都执行</td>
                        <td>混入钩子先执行，组件钩子后执行</td>
                    </tr>
                    <tr>
                        <td>值为对象的选项</td>
                        <td>如computed、components等</td>
                        <td>属性合并到同一对象</td>
                        <td>同名属性，组件覆盖混入</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="vue-example">
                <div class="vue-example-title">基本混入示例</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;&lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp } = Vue;<br><br>
                    
                    <span class="code-comment">// 定义一个混入对象</span><br>
                    <span class="code-keyword">const</span> myMixin = {<br>
                    &nbsp;&nbsp;data() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mixinMessage: <span class="code-string">'来自混入的消息'</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonValue: <span class="code-string">'混入的值'</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;created() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'混入的created钩子被调用'</span>);<br>
                    &nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;methods: {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;commonMethod() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'这是混入提供的方法'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;duplicateMethod() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'混入的重复方法'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;}<br>
                    };<br><br>
                    
                    createApp({<br>
                    &nbsp;&nbsp;mixins: [myMixin],<br><br>
                    &nbsp;&nbsp;data() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;componentMessage: <span class="code-string">'来自组件的消息'</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commonValue: <span class="code-string">'组件的值（覆盖混入）'</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;},<br><br>
                    &nbsp;&nbsp;created() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件的created钩子被调用'</span>);<br>
                    &nbsp;&nbsp;},<br><br>
                    &nbsp;&nbsp;methods: {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;duplicateMethod() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件的重复方法（覆盖混入）'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;},<br><br>
                    &nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;混入示例&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;混入消息: {{ mixinMessage }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;组件消息: {{ componentMessage }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;公共值: {{ commonValue }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"commonMethod"</span>&gt;调用混入方法&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"duplicateMethod"</span>&gt;调用重复方法&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;`<br>
                    }).mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>全局混入</h2>
            <p>一旦使用全局混入，它将影响所有Vue实例的创建。全局混入应当谨慎使用，因为它会影响所有创建的组件（包括第三方组件）。</p>
            
            <div class="vue-example">
                <div class="vue-example-title">全局混入示例</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app1"</span>&gt;&lt;/div&gt;<br>
                    &lt;div id=<span class="code-string">"app2"</span>&gt;&lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp } = Vue;<br><br>
                    
                    <span class="code-comment">// 全局混入</span><br>
                    <span class="code-keyword">const</span> app1 = createApp({<br>
                    &nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;应用1&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;全局混入数据: {{ globalMixinData }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;`<br>
                    });<br><br>
                    
                    app1.mixin({<br>
                    &nbsp;&nbsp;data() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;globalMixinData: <span class="code-string">'这是全局混入的数据'</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;created() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'全局混入的created钩子'</span>);<br>
                    &nbsp;&nbsp;}<br>
                    });<br><br>
                    app1.component(<span class="code-string">'child-component'</span>, {<br>
                    &nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;子组件中的全局混入数据: {{ globalMixinData }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;`<br>
                    });<br><br>
                    app1.mount(<span class="code-string">'#app1'</span>);<br><br>
                    
                    <span class="code-comment">// 第二个应用也会受到全局混入的影响</span><br>
                    <span class="code-keyword">const</span> app2 = createApp({<br>
                    &nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;应用2&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;全局混入数据: {{ globalMixinData }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;`<br>
                    });<br>
                    app2.mount(<span class="code-string">'#app2'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>实用混入示例</h2>
            <p>混入在实际开发中有很多应用场景，比如数据获取、事件处理、表单验证等。</p>
            
            <div class="vue-example">
                <div class="vue-example-title">实用混入示例：时间格式化和API请求</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;&lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp } = Vue;<br><br>
                    
                    <span class="code-comment">// 时间处理混入</span><br>
                    <span class="code-keyword">const</span> timeMixin = {<br>
                    &nbsp;&nbsp;methods: {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;formatDate(date) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!date) <span class="code-keyword">return</span> <span class="code-string">''</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> d = <span class="code-keyword">new</span> <span class="code-function">Date(date)</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> d.toLocaleDateString();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;formatDateTime(date) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!date) <span class="code-keyword">return</span> <span class="code-string">''</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> d = <span class="code-keyword">new</span> <span class="code-function">Date(date)</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> d.toLocaleString();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;timeAgo(date) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!date) <span class="code-keyword">return</span> <span class="code-string">''</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> seconds = Math.floor((<span class="code-keyword">new</span> <span class="code-function">Date()</span> - <span class="code-keyword">new</span> <span class="code-function">Date(date)</span>) / <span class="code-number">1000</span>);<br><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (seconds &lt; <span class="code-number">60</span>) <span class="code-keyword">return</span> <span class="code-string">`<span class="code-variable">${seconds}</span>秒前`</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (seconds &lt; <span class="code-number">3600</span>) <span class="code-keyword">return</span> <span class="code-string">`<span class="code-variable">${Math.floor(seconds / 60)}</span>分钟前`</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (seconds &lt; <span class="code-number">86400</span>) <span class="code-keyword">return</span> <span class="code-string">`<span class="code-variable">${Math.floor(seconds / 3600)}</span>小时前`</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-string">`<span class="code-variable">${Math.floor(seconds / 86400)}</span>天前`</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;}<br>
                    };<br><br>
                    
                    <span class="code-comment">// API请求混入</span><br>
                    <span class="code-keyword">const</span> apiMixin = {<br>
                    &nbsp;&nbsp;data() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading: <span class="code-boolean">false</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error: <span class="code-boolean">null</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;methods: {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;async apiRequest(url) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.loading = <span class="code-boolean">true</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.error = <span class="code-boolean">null</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">try</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> response = <span class="code-keyword">await</span> fetch(url);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!response.ok) <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-function">Error(response.statusText);</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-keyword">await</span> response.json();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">catch</span> (err) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.error = err.message;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(<span class="code-string">'API请求错误:'</span>, err);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">finally</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.loading = <span class="code-boolean">false</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;}<br>
                    };<br><br>
                    
                    createApp({<br>
                    &nbsp;&nbsp;mixins: [timeMixin, apiMixin],<br><br>
                    &nbsp;&nbsp;data() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTime: <span class="code-keyword">new</span> <span class="code-function">Date()</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastUpdate: <span class="code-boolean">null</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;},<br><br>
                    &nbsp;&nbsp;created() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.updateTime();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;setInterval(<span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.updateTime();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}, <span class="code-number">1000</span>);<br>
                    &nbsp;&nbsp;},<br><br>
                    &nbsp;&nbsp;methods: {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;updateTime() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.currentTime = <span class="code-keyword">new</span> <span class="code-function">Date()</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.lastUpdate = <span class="code-keyword">new</span> <span class="code-function">Date()</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;async loadUserData() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> userData = <span class="code-keyword">await</span> <span class="code-keyword">this</span>.apiRequest(<span class="code-string">'https://jsonplaceholder.typicode.com/users/1'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (userData) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'用户数据:'</span>, userData);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;},<br><br>
                    &nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;实用混入示例&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;当前时间: {{ currentTime.toLocaleTimeString() }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;格式化时间: {{ formatDate(lastUpdate) }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;相对时间: {{ timeAgo(lastUpdate) }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"loadUserData"</span> :disabled=<span class="code-string">"loading"</span>&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ loading ? '加载中...' : '加载用户数据' }}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p <span class="code-keyword">class</span>=<span class="code-string">"error"</span> v-if=<span class="code-string">"error"</span>&gt;错误: {{ error }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;`<br>
                    }).mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;<br><br>
                    
                    &lt;style&gt;<br>
                    .error {<br>
                    &nbsp;&nbsp;color: red;<br>
                    }<br>
                    &lt;/style&gt;
                </div>
            </div>
            
            <h2>混入的合并策略</h2>
            <p>当混入对象和组件包含同名选项时，Vue会根据选项类型应用不同的合并策略。</p>
            
            <div class="comparison">
                <div class="comparison-item">
                    <div class="comparison-title">生命周期钩子</div>
                    <p>混入和组件的同名钩子函数会被合并为数组，两者都会被调用。混入的钩子函数将在组件的钩子函数之前调用。</p>
                    <div class="code-block">
                        <span class="code-keyword">const</span> mixin = {<br>
                        &nbsp;&nbsp;created() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'混入created!'</span>);<br>
                        &nbsp;&nbsp;}<br>
                        };<br><br>
                        
                        <span class="code-keyword">const</span> component = {<br>
                        &nbsp;&nbsp;mixins: [mixin],<br>
                        &nbsp;&nbsp;created() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件created!'</span>);<br>
                        &nbsp;&nbsp;}<br>
                        }<br><br>
                        
                        <span class="code-comment">// 输出:</span><br>
                        <span class="code-comment">// 混入created!</span><br>
                        <span class="code-comment">// 组件created!</span>
                    </div>
                </div>
                
                <div class="comparison-item">
                    <div class="comparison-title">值为对象的选项</div>
                    <p>如methods、components、directives等，将被合并为同一个对象。如果键名冲突，组件的选项会覆盖混入的选项。</p>
                    <div class="code-block">
                        <span class="code-keyword">const</span> mixin = {<br>
                        &nbsp;&nbsp;methods: {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;commonMethod() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'混入方法'</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;conflictMethod() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'混入的冲突方法'</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;}<br>
                        };<br><br>
                        
                        <span class="code-keyword">const</span> component = {<br>
                        &nbsp;&nbsp;mixins: [mixin],<br>
                        &nbsp;&nbsp;methods: {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;conflictMethod() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件的冲突方法'</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;}<br>
                        }<br><br>
                        
                        <span class="code-comment">// 组件中:</span><br>
                        <span class="code-comment">// commonMethod() - 来自混入</span><br>
                        <span class="code-comment">// conflictMethod() - 来自组件（覆盖混入）</span>
                    </div>
                </div>
            </div>
            
            <h2>混入的缺点和注意事项</h2>
            <p>虽然混入提供了一种复用组件功能的方式，但也存在一些缺点和需要注意的地方。</p>
            
            <div class="key-features">
                <h3>混入的缺点</h3>
                <ul>
                    <li><strong>命名冲突</strong>：混入和组件可能使用相同名称的数据属性或方法</li>
                    <li><strong>隐式依赖</strong>：组件依赖变得不明确且隐式</li>
                    <li><strong>可读性降低</strong>：难以追踪方法或属性的来源</li>
                    <li><strong>灵活性不足</strong>：无法像函数那样接受参数</li>
                    <li><strong>维护困难</strong>：修改混入可能影响多个组件</li>
                </ul>
            </div>
            
            <h2>混入的替代方案</h2>
            <p>在Vue 3中，推荐使用组合式API作为混入的替代方案，它提供了更好的逻辑组织方式。</p>
            
            <div class="vue-example">
                <div class="vue-example-title">组合式API作为混入的替代方案</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;&lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp, ref, onMounted } = Vue;<br><br>
                    
                    <span class="code-comment">// 使用组合式API创建可复用逻辑</span><br>
                    <span class="code-function">function</span> <span class="code-function">useTimeFormat</span>() {<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> formatDate = <span class="code-function">(date)</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!date) <span class="code-keyword">return</span> <span class="code-string">''</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> d = <span class="code-keyword">new</span> <span class="code-function">Date(date)</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> d.toLocaleDateString();<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> formatDateTime = <span class="code-function">(date)</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!date) <span class="code-keyword">return</span> <span class="code-string">''</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> d = <span class="code-keyword">new</span> <span class="code-function">Date(date)</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> d.toLocaleString();<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">return</span> { formatDate, formatDateTime };<br>
                    }<br><br>
                    
                    <span class="code-function">function</span> <span class="code-function">useApi</span>() {<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> loading = ref(<span class="code-boolean">false</span>);<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> error = ref(<span class="code-boolean">null</span>);<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> apiRequest = <span class="code-keyword">async</span> <span class="code-function">(url)</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;loading.value = <span class="code-boolean">true</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;error.value = <span class="code-boolean">null</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">try</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> response = <span class="code-keyword">await</span> fetch(url);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!response.ok) <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-function">Error(response.statusText);</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-keyword">await</span> response.json();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">catch</span> (err) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.value = err.message;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(<span class="code-string">'API请求错误:'</span>, err);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">finally</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading.value = <span class="code-boolean">false</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;};<br><br>
                    &nbsp;&nbsp;<span class="code-keyword">return</span> { loading, error, apiRequest };<br>
                    }<br><br>
                    
                    createApp({<br>
                    &nbsp;&nbsp;setup() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 使用可复用的逻辑</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> { formatDate, formatDateTime } = useTimeFormat();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> { loading, error, apiRequest } = useApi();<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> currentTime = ref(<span class="code-keyword">new</span> <span class="code-function">Date()</span>);<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setInterval(<span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTime.value = <span class="code-keyword">new</span> <span class="code-function">Date()</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, <span class="code-number">1000</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTime,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;formatDate,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apiRequest<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;};<br>
                    &nbsp;&nbsp;},<br><br>
                    &nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;组合式API替代混入&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;当前时间: {{ currentTime.toLocaleTimeString() }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"apiRequest('https://jsonplaceholder.typicode.com/users/1')"</span> :disabled=<span class="code-string">"loading"</span>&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ loading ? '加载中...' : '加载用户数据' }}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;`<br>
                    }).mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h3>最佳实践建议</h3>
            <p>使用混入时，遵循以下最佳实践可以避免常见问题：</p>
            
            <ul>
                <li>明确混入的用途和功能，避免创建过于复杂的混入</li>
                <li>使用清晰的命名约定，避免命名冲突</li>
                <li>文档化混入提供的属性和方法</li>
                <li>谨慎使用全局混入，仅在必要时使用</li>
                <li>考虑使用组合式API作为更灵活的替代方案</li>
            </ul>
            
            <div class="practice">
                <h3>实践练习</h3>
                <ul>
                    <li>创建一个表单验证混入</li>
                    <li>实现一个分页功能混入</li>
                    <li>创建一个本地存储操作混入</li>
                    <li>实现一个事件总线混入</li>
                    <li>创建一个权限控制混入</li>
                    <li>使用组合式API重构混入示例</li>
                </ul>
            </div>
        </div>
        
        <nav>
            <a href="render-functions.html" class="nav-link">← 上一课：渲染函数与JSX</a>
            <a href="custom-elements.html" class="nav-link">下一课：自定义元素 →</a>
        </nav>
        
        <footer>
            <p>Vue.js快速上手 - 从零到大神，成为前端大拿，胜任大厂专家职位</p>
        </footer>
    </div>
</body>
</html>