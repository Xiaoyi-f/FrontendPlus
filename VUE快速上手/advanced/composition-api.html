<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>组合式API - Vue.js快速上手</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: #f8f9fa;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        h1 {
            color: #42b983;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .breadcrumb {
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        
        .content {
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            margin: 25px 0 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        
        h3 {
            color: #555;
            margin: 20px 0 12px;
        }
        
        p {
            margin-bottom: 15px;
            line-height: 1.8;
        }
        
        .code-block {
            background: #2d3648;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .code-comment {
            color: #637777;
        }
        
        .code-keyword {
            color: #c792ea;
        }
        
        .code-variable {
            color: #ffcb6b;
        }
        
        .code-string {
            color: #c3e88d;
        }
        
        .code-number {
            color: #f78c6c;
        }
        
        .code-function {
            color: #82aaff;
        }
        
        .code-boolean {
            color: #ff5874;
        }
        
        .api-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .api-table th, .api-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .api-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        .api-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .key-features {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }
        
        .key-features h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }
        
        .key-features ul {
            padding-left: 25px;
        }
        
        .key-features li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .comparison-item {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #42b983;
        }
        
        .comparison-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .practice {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }
        
        .practice h3 {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .practice ul {
            padding-left: 25px;
        }
        
        .practice li {
            margin-bottom: 10px;
        }
        
        .vue-example {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        .vue-example-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        nav {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .nav-link {
            display: inline-block;
            padding: 10px 20px;
            background: #42b983;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 0 10px;
        }
        
        .nav-link:hover {
            background: #359c6d;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="breadcrumb">Vue.js快速上手 > 进阶特性篇 > 组合式API</div>
            <h1>组合式API (Composition API)</h1>
        </header>
        
        <div class="content">
            <p>组合式API (Composition API) 是 Vue 3 引入的一种新的组件开发方式，它允许我们更灵活地组织和复用组件逻辑。相比选项式API (Options API)，组合式API让我们可以按照逻辑关注点来组织代码，而不是按照选项类型（data、methods、computed等）。</p>
            
            <div class="key-features">
                <h3>组合式API核心概念</h3>
                <ul>
                    <li><strong>setup函数</strong>：组合式API的入口点</li>
                    <li><strong>响应式API</strong>：ref、reactive、computed等</li>
                    <li><strong>生命周期钩子</strong>：onMounted、onUpdated、onUnmounted等</li>
                    <li><strong>依赖注入</strong>：provide和inject</li>
                    <li><strong>逻辑复用</strong>：通过函数组织和复用逻辑</li>
                    <li><strong>类型推断</strong>：更好的TypeScript支持</li>
                </ul>
            </div>
            
            <h2>Setup函数</h2>
            <p>setup函数是组合式API的入口点，它会在组件创建之前执行。在这个函数中，我们可以访问组件的响应式数据、方法和生命周期钩子。</p>
            
            <div class="vue-example">
                <div class="vue-example-title">Setup函数基础示例</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;setup-demo&gt;&lt;/setup-demo&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp, ref, reactive, onMounted } = Vue;<br><br>
                    
                    createApp({})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'setup-demo'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;setup() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 响应式数据</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> count = ref(<span class="code-number">0</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> state = reactive({<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: <span class="code-string">'Vue Composition API'</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: <span class="code-string">'3.x'</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 方法</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> increment = <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count.value++;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 生命周期钩子</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'Setup demo component mounted'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 返回值将暴露给模板</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;{{ state.name }} v{{ state.version }}&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;计数: {{ count }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"increment"</span>&gt;增加&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>响应式API</h2>
            <p>组合式API提供了多种创建响应式数据的方法，包括ref、reactive、computed等。</p>
            
            <table class="api-table">
                <thead>
                    <tr>
                        <th>API</th>
                        <th>用途</th>
                        <th>示例</th>
                        <th>说明</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ref</td>
                        <td>创建响应式的原始值</td>
                        <td>const count = ref(0)</td>
                        <td>需要使用.value访问值</td>
                    </tr>
                    <tr>
                        <td>reactive</td>
                        <td>创建响应式的对象</td>
                        <td>const state = reactive({})</td>
                        <td>直接访问和修改属性</td>
                    </tr>
                    <tr>
                        <td>computed</td>
                        <td>创建计算属性</td>
                        <td>const doubled = computed(() => count.value * 2)</td>
                        <td>具有缓存的响应式值</td>
                    </tr>
                    <tr>
                        <td>watch</td>
                        <td>监听响应式数据变化</td>
                        <td>watch(count, (newVal) => {...})</td>
                        <td>响应数据变化时执行回调</td>
                    </tr>
                    <tr>
                        <td>watchEffect</td>
                        <td>副作用监听器</td>
                        <td>watchEffect(() => {...})</td>
                        <td>自动追踪依赖并响应变化</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="vue-example">
                <div class="vue-example-title">响应式API示例</div>
                <div class="code-block">
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;reactivity-demo&gt;&lt;/reactivity-demo&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp, ref, reactive, computed, watch, watchEffect } = Vue;<br><br>
                    
                    createApp({})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'reactivity-demo'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;setup() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 基本响应式值</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> firstName = ref(<span class="code-string">'John'</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> lastName = ref(<span class="code-string">'Doe'</span>);<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 计算属性</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> fullName = computed(<span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-string">`<span class="code-variable">${firstName.value}</span> <span class="code-variable">${lastName.value}</span>`</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 响应式对象</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> user = reactive({<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;age: <span class="code-number">30</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email: <span class="code-string">'john@example.com'</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 监听器</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;watch(fullName, <span class="code-function">(newName, oldName)</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">`姓名从 <span class="code-variable">${oldName}</span> 变为 <span class="code-variable">${newName}</span>`</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;watchEffect(<span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'用户信息:'</span>, user.age, user.email);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstName,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastName,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fullName,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;响应式API演示&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input v-model=<span class="code-string">"firstName"</span> placeholder=<span class="code-string">"名"</span>&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input v-model=<span class="code-string">"lastName"</span> placeholder=<span class="code-string">"姓"</span>&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;全名: {{ fullName }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input v-model.number=<span class="code-string">"user.age"</span> type=<span class="code-string">"number"</span> placeholder=<span class="code-string">"年龄"</span>&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input v-model=<span class="code-string">"user.email"</span> placeholder=<span class="code-string">"邮箱"</span>&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;年龄: {{ user.age }}, 邮箱: {{ user.email }}&lt;/p&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>生命周期钩子</h2>
            <p>在组合式API中，生命周期钩子需要从Vue中导入，并在setup函数中使用。</p>
            
            <div class="comparison">
                <div class="comparison-item">
                    <div class="comparison-title">选项式API</div>
                    <div class="code-block">
                        <span class="code-keyword">const</span> MyComponent = {<br>
                        &nbsp;&nbsp;data() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count: <span class="code-number">0</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;},<br>
                        &nbsp;&nbsp;mounted() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已挂载'</span>);<br>
                        &nbsp;&nbsp;},<br>
                        &nbsp;&nbsp;updated() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已更新'</span>);<br>
                        &nbsp;&nbsp;},<br>
                        &nbsp;&nbsp;unmounted() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已卸载'</span>);<br>
                        &nbsp;&nbsp;},<br>
                        &nbsp;&nbsp;methods: {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;increment() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">this</span>.count++;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;}<br>
                        };
                    </div>
                </div>
                
                <div class="comparison-item">
                    <div class="comparison-title">组合式API</div>
                    <div class="code-block">
                        <span class="code-keyword">import</span> { ref, onMounted, onUpdated, onUnmounted } <span class="code-keyword">from</span> <span class="code-string">'vue'</span>;<br><br>
                        
                        <span class="code-keyword">const</span> MyComponent = {<br>
                        &nbsp;&nbsp;setup() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> count = ref(<span class="code-number">0</span>);<br><br>
                        
                        &nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="code-function">()</span> =&gt; {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已挂载'</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                        
                        &nbsp;&nbsp;&nbsp;&nbsp;onUpdated(<span class="code-function">()</span> =&gt; {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已更新'</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                        
                        &nbsp;&nbsp;&nbsp;&nbsp;onUnmounted(<span class="code-function">()</span> =&gt; {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span class="code-string">'组件已卸载'</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;});<br><br>
                        
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> increment = <span class="code-function">()</span> =&gt; {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count.value++;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;};<br><br>
                        
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;};<br>
                        &nbsp;&nbsp;}<br>
                        };
                    </div>
                </div>
            </div>
            
            <h2>逻辑复用与Composables</h2>
            <p>组合式API最强大的特性之一是能够轻松地在不同组件之间复用逻辑。我们可以通过创建composables函数来实现这一点。</p>
            
            <div class="vue-example">
                <div class="vue-example-title">Composable函数示例</div>
                <div class="code-block">
                    <span class="code-comment">// useCounter.js - 可复用的计数器逻辑</span><br>
                    <span class="code-keyword">import</span> { ref } <span class="code-keyword">from</span> <span class="code-string">'vue'</span>;<br><br>
                    
                    <span class="code-keyword">export</span> <span class="code-keyword">function</span> <span class="code-function">useCounter</span>(initialValue = <span class="code-number">0</span>) {<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> count = ref(initialValue);<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> increment = <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;count.value++;<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> decrement = <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;count.value--;<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> reset = <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;count.value = initialValue;<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;count,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;increment,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;decrement,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;reset<br>
                    &nbsp;&nbsp;};<br>
                    }<br><br>
                    
                    <span class="code-comment">// 使用composable的组件</span><br>
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;counter-a&gt;&lt;/counter-a&gt;<br>
                    &nbsp;&nbsp;&lt;counter-b&gt;&lt;/counter-b&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp } = Vue;<br><br>
                    
                    <span class="code-keyword">function</span> <span class="code-function">useCounter</span>(initialValue = <span class="code-number">0</span>) {<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> count = ref(initialValue);<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> increment = <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;count.value++;<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> decrement = <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;count.value--;<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> reset = <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;count.value = initialValue;<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;count,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;increment,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;decrement,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;reset<br>
                    &nbsp;&nbsp;};<br>
                    }<br><br>
                    
                    createApp({})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'counter-a'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;setup() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> { count, increment, decrement, reset } = useCounter(<span class="code-number">0</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decrement,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reset<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;计数器 A: {{ count }}&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"increment"</span>&gt;+&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"decrement"</span>&gt;-&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"reset"</span>&gt;重置&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'counter-b'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;setup() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> { count, increment, decrement, reset } = useCounter(<span class="code-number">100</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decrement,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reset<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;计数器 B: {{ count }}&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"increment"</span>&gt;+&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"decrement"</span>&gt;-&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=<span class="code-string">"reset"</span>&gt;重置&lt;/button&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h2>实际应用场景</h2>
            <p>组合式API在实际开发中有很多应用场景：</p>
            
            <div class="key-features">
                <h3>常见应用场景</h3>
                <ul>
                    <li><strong>表单处理</strong>：复用表单验证逻辑</li>
                    <li><strong>API请求</strong>：封装数据获取和加载状态</li>
                    <li><strong>响应式数据</strong>：管理复杂的状态逻辑</li>
                    <li><strong>用户交互</strong>：处理复杂的用户交互逻辑</li>
                    <li><strong>第三方集成</strong>：封装第三方库的集成逻辑</li>
                    <li><strong>权限控制</strong>：复用权限检查逻辑</li>
                </ul>
            </div>
            
            <div class="vue-example">
                <div class="vue-example-title">实际应用示例 - 数据获取Composable</div>
                <div class="code-block">
                    <span class="code-comment">// useApiData.js - 可复用的数据获取逻辑</span><br>
                    <span class="code-keyword">import</span> { ref, onMounted } <span class="code-keyword">from</span> <span class="code-string">'vue'</span>;<br><br>
                    
                    <span class="code-keyword">export</span> <span class="code-keyword">function</span> <span class="code-function">useApiData</span>(url) {<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> data = ref(<span class="code-boolean">null</span>);<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> loading = ref(<span class="code-boolean">true</span>);<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> error = ref(<span class="code-boolean">null</span>);<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> fetchData = <span class="code-keyword">async</span> <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">try</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading.value = <span class="code-boolean">true</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.value = <span class="code-boolean">null</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> response = <span class="code-keyword">await</span> fetch(url);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!response.ok) <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-function">Error(response.statusText);</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data.value = <span class="code-keyword">await</span> response.json();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">catch</span> (err) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.value = err.message;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">finally</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading.value = <span class="code-boolean">false</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;onMounted(fetchData);<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;data,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;loading,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;error,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;fetchData<br>
                    &nbsp;&nbsp;};<br>
                    }<br><br>
                    
                    <span class="code-comment">// 使用数据获取composable的组件</span><br>
                    &lt;div id=<span class="code-string">"app"</span>&gt;<br>
                    &nbsp;&nbsp;&lt;user-list&gt;&lt;/user-list&gt;<br>
                    &lt;/div&gt;<br><br>
                    
                    &lt;script&gt;<br>
                    <span class="code-keyword">const</span> { createApp } = Vue;<br><br>
                    
                    <span class="code-keyword">function</span> <span class="code-function">useApiData</span>(url) {<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> data = ref(<span class="code-boolean">null</span>);<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> loading = ref(<span class="code-boolean">true</span>);<br>
                    &nbsp;&nbsp;<span class="code-keyword">const</span> error = ref(<span class="code-boolean">null</span>);<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">const</span> fetchData = <span class="code-keyword">async</span> <span class="code-function">()</span> =&gt; {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">try</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading.value = <span class="code-boolean">true</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.value = <span class="code-boolean">null</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> response = <span class="code-keyword">await</span> fetch(url);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (!response.ok) <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-function">Error(response.statusText);</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data.value = <span class="code-keyword">await</span> response.json();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">catch</span> (err) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.value = err.message;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">finally</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading.value = <span class="code-boolean">false</span>;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;};<br><br>
                    
                    &nbsp;&nbsp;onMounted(fetchData);<br><br>
                    &nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;data,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;loading,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;error,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;fetchData<br>
                    &nbsp;&nbsp;};<br>
                    }<br><br>
                    
                    createApp({})<br>
                    &nbsp;&nbsp;.component(<span class="code-string">'user-list'</span>, {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;setup() {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">const</span> { data, loading, error } = useApiData(<span class="code-string">'https://jsonplaceholder.typicode.com/users'</span>);<br><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;},<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;template: `<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;用户列表&lt;/h3&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div v-if=<span class="code-string">"loading"</span>&gt;加载中...&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div v-else-if=<span class="code-string">"error"</span>&gt;错误: {{ error }}&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul v-else&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li v-for=<span class="code-string">"user in data"</span> :key=<span class="code-string">"user.id"</span>&gt;{{ user.name }} - {{ user.email }}&lt;/li&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;`<br>
                    &nbsp;&nbsp;})<br>
                    &nbsp;&nbsp;.mount(<span class="code-string">'#app'</span>);<br>
                    &lt;/script&gt;
                </div>
            </div>
            
            <h3>最佳实践建议</h3>
            <p>在使用组合式API时，有一些最佳实践建议：</p>
            
            <ul>
                <li>合理组织代码逻辑，按照功能而非选项类型组织代码</li>
                <li>创建可复用的composables来封装通用逻辑</li>
                <li>在适当的时机使用watch和watchEffect</li>
                <li>了解何时使用ref和reactive</li>
                <li>使用类型提示（TypeScript）来提高代码质量</li>
                <li>避免在setup函数中执行副作用操作</li>
            </ul>
            
            <div class="practice">
                <h3>实践练习</h3>
                <ul>
                    <li>创建一个useLocalStorage composable来处理本地存储</li>
                    <li>实现一个useMouse composable来跟踪鼠标位置</li>
                    <li>创建一个表单验证composable</li>
                    <li>实现一个useDarkMode composable来管理主题切换</li>
                    <li>创建一个useNetwork composable来检测网络状态</li>
                    <li>实现一个可复用的分页composable</li>
                </ul>
            </div>
        </div>
        
        <nav>
            <a href="index.html" class="nav-link">← 上一课：进阶特性篇介绍</a>
            <a href="reactivity.html" class="nav-link">下一课：响应式原理深入 →</a>
        </nav>
        
        <footer>
            <p>Vue.js快速上手 - 从零到大神，成为前端大拿，胜任大厂专家职位</p>
        </footer>
    </div>
</body>
</html>